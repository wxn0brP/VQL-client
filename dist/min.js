var VQLClient=(()=>{var s=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var g=(r,t)=>{for(var e in t)s(r,e,{get:t[e],enumerable:!0})},m=(r,t,e,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of w(t))!T.call(r,n)&&n!==e&&s(r,n,{get:()=>t[n],enumerable:!(a=l(t,n))||a.enumerable});return r};var E=r=>m(s({},"__esModule",{value:!0}),r);var U={};g(U,{VConfig:()=>i,defTransport:()=>Q,fetchVQL:()=>d});var i={transport:Q,hooks:{},url:"/VQL"};async function d(r,t={},e={}){var f,c,p,u;let{transport:a,hooks:n}=i,V=Date.now();try{e=Object.assign({},t,e),(f=n.onStart)==null||f.call(n,r,e),typeof r=="string"&&Object.keys(t).length&&(r={query:r,var:t});let o=await a(r),L=Date.now()-V;if((c=n.onEnd)==null||c.call(n,r,L,o,e),o!=null&&o.err){let y=new Error(o.err);throw(p=n.onError)==null||p.call(n,r,y,o,e),y}return o.result!==void 0?o.result:o}catch(o){throw(u=n.onError)==null||u.call(n,r,o,null,e),o}}async function Q(r){let t=await fetch(i.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:r})});if(!t.ok)throw new Error(`VQL request failed: ${t.status}`);return await t.json()}typeof window!="undefined"&&(window.VQLClient={fetchVQL:d,defTransport:Q,cfg:i});return E(U);})();

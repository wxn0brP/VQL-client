var VQLClient=(()=>{var c=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var m=(n,t)=>{for(var e in t)c(n,e,{get:t[e],enumerable:!0})},b=(n,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of w(t))!h.call(n,a)&&a!==e&&c(n,a,{get:()=>t[a],enumerable:!(s=L(t,a))||s.enumerable});return n};var T=n=>b(c({},"__esModule",{value:!0}),n);var x={};m(x,{VConfig:()=>i,defTransport:()=>y,fetchVQL:()=>u});var i={transport:y,fetchImplementation:fetch,hooks:{},url:"/VQL"};async function u(n,t={},e={},s={}){var d,f,p,Q;let{transport:a,hooks:r}=i,g=Date.now();try{e=Object.assign({},i.hookContext,t,e),(d=r.onStart)==null||d.call(r,n,e),typeof n=="string"&&Object.keys(t).length&&(n={query:n,var:t});let o=await a(n,s),V=Date.now()-g;if((f=r.onEnd)==null||f.call(r,n,V,o,e),o!=null&&o.err){let l=new Error(o.err);throw(p=r.onError)==null||p.call(r,n,l,o,e),l}return o.result!==void 0?o.result:o}catch(o){throw(Q=r.onError)==null||Q.call(r,n,o,null,e),o}}async function y(n,t){let e=Object.assign({"Content-Type":"application/json"},i.headers,t.headers),s=Object.assign({},i.body,t.body,{query:n}),a={method:"POST",headers:e,body:JSON.stringify(s)};t.signal&&(a.signal=t.signal);let r=await i.fetchImplementation(i.url,a);if(!r.ok)throw new Error(`VQL request failed: ${r.status}`);return await r.json()}typeof window!="undefined"&&(window.VQLClient={fetchVQL:u,defTransport:y,cfg:i});return T(x);})();
